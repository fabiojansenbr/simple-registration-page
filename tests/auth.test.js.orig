const request = require('supertest');
const app = require('../app');
const User = require('../database/models').User;
const bcrypt = require('bcrypt');

function hashPassword(password) {
    return bcrypt.hashSync(password, 10);
}

let profile = {
    email: 'test@localhost.dev',
    password: hashPassword('secret123'),
    firstName: 'risyal',
    lastName: 'ambiyansyah',
    mobileNumber: '6281229502499',
    dateOfBirth: '1993-03-03',
    gender: 'm'
}

describe('Test login', () => {
    test('It should create new user', async () => {
        const user = await User.create(profile);
        expect(user.email).toBe('test@localhost.dev');

        await user.destroy();
    });
})